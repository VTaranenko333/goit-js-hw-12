{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46068756-c5f919e10572d3f09e9540b43';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query, page = 1) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: PER_PAGE,\n    page: page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch images');\n  }\n}\n","export function renderImages(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <div class=\"photo-card\">\n            <div class=\"photo-card-img\">\n              <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n              </a>\n            </div>\n            <div class=\"info\">\n              <div class=\"info-item\">\n                <b>Likes</b>\n                <p>${likes}</p>\n              </div>\n              <div class=\"info-item\">\n                <b>Views</b>\n                <p>${views}</p>\n              </div>\n              <div class=\"info-item\">\n                <b>Comments</b>\n                <p>${comments}</p>\n              </div>\n              <div class=\"info-item\">\n                <b>Downloads</b>\n                <p>${downloads}</p>\n              </div>\n            </div>\n          </div>\n    `\n    )\n    .join('');\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst searchLoader = document.querySelector('#search-loader'); // Лоадер для пошуку\nconst loadMoreLoader = document.querySelector('#load-more-loader'); // Лоадер для \"Load more\"\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\nlet lightbox;\n\nconst PER_PAGE = 15;\n\n// Початково ховаємо кнопку та лоадери\nloadMoreBtn.classList.add('hidden');\nsearchLoader.classList.add('hidden');\nloadMoreLoader.classList.add('hidden');\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(e) {\n  e.preventDefault();\n\n  query = form.query.value.trim();\n  if (!query) {\n    iziToast.warning({ message: 'Please enter a search query!' });\n    return;\n  }\n\n  page = 1; // Скидаємо пагінацію\n  gallery.innerHTML = ''; // Очищаємо попередні результати\n  loadMoreBtn.classList.add('hidden'); // Ховаємо кнопку перед новим пошуком\n  searchLoader.classList.remove('hidden'); // Показуємо лоадер для пошуку\n\n  try {\n    const data = await fetchImages(query, page);\n    totalHits = data.totalHits;\n\n    if (totalHits === 0) {\n      iziToast.info({ message: 'No images found for your search!' });\n      return;\n    }\n\n    renderGallery(data.hits);\n\n    // Показуємо кнопку, якщо є більше зображень для завантаження\n    if (totalHits > PER_PAGE) {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    iziToast.error({ message: 'Failed to fetch images!' });\n  } finally {\n    searchLoader.classList.add('hidden'); // Приховуємо лоадер після запиту\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n\n  // Ховаємо кнопку і показуємо лоадер\n  loadMoreBtn.classList.add('hidden');\n  loadMoreLoader.classList.remove('hidden'); // Показуємо лоадер для \"Load more\"\n\n  try {\n    const data = await fetchImages(query, page);\n    renderGallery(data.hits);\n\n    // Якщо користувач дійшов до кінця колекції\n    if (page * PER_PAGE >= totalHits) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreBtn.classList.add('hidden'); // Ховаємо кнопку, якщо більше зображень немає\n    } else {\n      loadMoreBtn.classList.remove('hidden'); // Показуємо кнопку, якщо є ще зображення\n    }\n\n    // Плавна прокрутка\n    smoothScroll();\n  } catch (error) {\n    iziToast.error({ message: 'Failed to load more images!' });\n  } finally {\n    loadMoreLoader.classList.add('hidden'); // Ховаємо лоадер після завантаження\n  }\n}\n\nfunction renderGallery(images) {\n  const markup = renderImages(images);\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery-link');\n  } else {\n    lightbox.refresh();\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nconst styles = `\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np {\n  margin: 0;\n}\n\np:last-child {\n  margin-bottom: 0;\n}\n\nul {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\na {\n  color: currentColor;\n  text-decoration: none;\n}\n\nimg {\n  display: block;\n  max-width: 100%;\n  height: auto;\n}\n\nbody {\n  font-family: 'Montserrat', sans-serif;\n}\n\n.container {\npadding: 24px 156px;\n}\n\n.search-form {\n  margin: 20px;\n  text-align: center;\n}\n\n.gallery {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));\n  grid-gap: 24px;\n  padding: 20px;\n}\n\n.photo-card {\n  border: 1px solid #ccc;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.photo-card-img {\n  width: 100%;\n  height: auto;\n  flex: 1;\n}\n\n.loader {\n  position: fixed;\n  top: 100;\n  left: 50%;\n  transform: translateX(-50%) rotate(45deg);\n  width: 64px;\n  height: 64px;\n  background-color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n.loader:after {\n  content: '';\n  position: absolute;\n  inset: 8px;\n  margin: auto;\n  background: #222b32;\n}\n.loader:before {\n  content: '';\n  position: absolute;\n  inset: -15px;\n  margin: auto;\n  background: #de3500;\n  animation: diamondLoader 2s linear infinite;\n}\n@keyframes diamondLoader {\n  0%  ,10% {\n    transform: translate(-64px , -64px) rotate(-45deg)\n  }\n  90% , 100% {\n    transform: translate(0px , 0px) rotate(-45deg)\n  }\n}\n\n#search-form {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n}\n\n.load-more {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n  padding: 10px 20px;\n  background-color: #4e75ff;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  margin: 0 auto;\n}\n\n.load-more:hover {\n  background-color: #6c8cff;\n  }\n\n.hidden {\n  display: none;\n}\n\n.info {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  text-align: center;\n  width: auto;\n  height: 48px;\n  padding: 4px 0;\n}\n\ninput {\n  font-weight: 400;\n  font-size: 16px;\n  line-height: 150%;\n  letter-spacing: 0.04em;\n  color: #2e2f42;\n  border: 1px solid #808080;\n  border-color: #808080;\n  border-radius: 4px;\n  min-width: 274px;\n  height: 40px;\n  padding: 0px 16px;\n  margin-right: 20px;\n}\n\ninput:hover {\n  border-color: #000;\n}\n\ninput:focus {\n  border-color: #4e75ff;\n}\n\n.search-btn {\n  cursor: pointer;\n  border: none;\n  border-radius: 8px;\n  padding: 8px 16px;\n  width: auto;\n  height: 40px;\n  background: #4e75ff;\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 150%;\n  letter-spacing: 0.04em;\n  color: #fff;\n}\n\n.search-btn:hover {\n  border: none;\n  background: #6c8cff;\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 150%;\n  letter-spacing: 0.04em;\n  color: #fff;\n}\n\n`;\n\nconst styleSheet = document.createElement('style');\nstyleSheet.innerText = styles;\n\ndocument.head.appendChild(styleSheet);\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","params","axios","renderImages","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loadMoreBtn","searchLoader","loadMoreLoader","totalHits","lightbox","onSearch","onLoadMore","e","iziToast","data","renderGallery","smoothScroll","markup","SimpleLightbox","cardHeight","styles","styleSheet"],"mappings":"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"}